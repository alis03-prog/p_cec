<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Calculadora de Áreas</title>

    {% load static %}
    <link rel="stylesheet" href="{% static 'areas/style.css' %}"> 

    <script>
        function mostrarCampos() {
            const figura = document.getElementById("figura").value;

            document.querySelectorAll(".grupo").forEach(g => {
                g.style.display = "none";
            });

            if (figura) {
                const grupo = document.getElementById("grupo-" + figura);
                if (grupo) grupo.style.display = "block";
            }
        }
    </script>
</head>
<body>

<div class="contenedor">
    <h2>Calculadora de Áreas</h2>

    <form method="POST">
        {% csrf_token %}

        <label for="figura">Selecciona la figura:</label>

        <select name="figura" id="figura" onchange="mostrarCampos()" required>
            <option value="">-- Selecciona --</option>

            <option value="cuadrado"   {% if figura == "cuadrado" %}selected{% endif %}>Cuadrado</option>
            <option value="rectangulo" {% if figura == "rectangulo" %}selected{% endif %}>Rectángulo</option>
            <option value="triangulo"  {% if figura == "triangulo" %}selected{% endif %}>Triángulo</option>
            <option value="circulo"    {% if figura == "circulo" %}selected{% endif %}>Círculo</option>
        </select>

        <!-- CUADRADO -->
        <div id="grupo-cuadrado" class="grupo">
            <label>Lado (cm):</label>
            <input type="number" step="0.01" name="lado">
        </div>

        <!-- RECTÁNGULO -->
        <div id="grupo-rectangulo" class="grupo">
            <label>Base (cm):</label>
            <input type="number" step="0.01" name="base">
            
            <label>Altura (cm):</label>
            <input type="number" step="0.01" name="altura">
        </div>

        <!-- TRIÁNGULO -->
        <div id="grupo-triangulo" class="grupo">
            <label>Base (cm):</label>
            <input type="number" step="0.01" name="base">

            <label>Altura (cm):</label>
            <input type="number" step="0.01" name="altura">
        </div>

        <!-- CÍRCULO -->
        <div id="grupo-circulo" class="grupo">
            <label>Radio (cm):</label>
            <input type="number" step="0.01" name="radio">
        </div>

        <button type="submit">Calcular</button>
    </form>

    {% if resultado %}
    <div class="resultado">
        <strong>Resultado:</strong> <br>
        El área del <strong>{{ figura }}</strong> es:
        <strong>{{ resultado }} cm²</strong>
    </div>
    {% endif %}

    <a class="volver" href="{% url 'areas_index' %}">Volver al inicio</a>

</div>

<script>
    // activar el grupo correcto si la página recarga tras enviar
    mostrarCampos();
</script>

</body>
</html>
